import{d as ae,g as oe,r as k,j as i}from"./index-DF-VfARk.js";import{u as ce}from"./useUserContext-BfcVo3vY.js";import{A as le,T as ue}from"./index-Pi5MhuwB.js";import{a as de}from"./index-DkUROBfk.js";import{R as re,C as Y}from"./row-CN7xCyZB.js";import{S as Z}from"./index-DTSHrXDL.js";import{C as z}from"./index-CSDeIJLm.js";import{u as fe}from"./useBreakpoint-DbOrmpLl.js";import{g as me,m as he,r as pe,c as ge,e as xe,x as ye}from"./index-CZ386Uyv.js";import{p as $e}from"./pickAttrs-BTWl6K21.js";import{S as ve}from"./Dropdown-BkR0riwv.js";import{F as Se}from"./Table-DntA-cr1.js";import{A as je}from"./index-DixPxxsU.js";import{P as Me}from"./index-D_Jq7_Ot.js";import"./responsiveObserver-BnMIucoH.js";import"./CloseOutlined-C3B3v_Kh.js";import"./EllipsisOutlined-CK11HSgJ.js";import"./Sider-G10ASfwf.js";import"./index-B5xBNH_Q.js";import"./collapse-BbEVqHco.js";import"./index-DXhDvoHf.js";import"./index-C3dcIk9B.js";import"./index-BKkJNJXg.js";var ie={exports:{}};(function(c,d){(function(r,a){c.exports=a()})(ae,function(){var r=1e3,a=6e4,m=36e5,w="millisecond",v="second",h="minute",g="hour",$="day",b="week",f="month",x="quarter",D="year",E="date",Q="Invalid Date",K=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ee=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,te={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(o){var n=["th","st","nd","rd"],e=o%100;return"["+o+(n[(e-20)%10]||n[e]||n[0])+"]"}},U=function(o,n,e){var s=String(o);return!s||s.length>=n?o:""+Array(n+1-s.length).join(e)+o},ne={s:U,z:function(o){var n=-o.utcOffset(),e=Math.abs(n),s=Math.floor(e/60),t=e%60;return(n<=0?"+":"-")+U(s,2,"0")+":"+U(t,2,"0")},m:function o(n,e){if(n.date()<e.date())return-o(e,n);var s=12*(e.year()-n.year())+(e.month()-n.month()),t=n.clone().add(s,f),l=e-t<0,u=n.clone().add(s+(l?-1:1),f);return+(-(s+(e-t)/(l?t-u:u-t))||0)},a:function(o){return o<0?Math.ceil(o)||0:Math.floor(o)},p:function(o){return{M:f,y:D,w:b,d:$,D:E,h:g,m:h,s:v,ms:w,Q:x}[o]||String(o||"").toLowerCase().replace(/s$/,"")},u:function(o){return o===void 0}},I="en",O={};O[I]=te;var X="$isDayjsObject",W=function(o){return o instanceof L||!(!o||!o[X])},F=function o(n,e,s){var t;if(!n)return I;if(typeof n=="string"){var l=n.toLowerCase();O[l]&&(t=l),e&&(O[l]=e,t=l);var u=n.split("-");if(!t&&u.length>1)return o(u[0])}else{var y=n.name;O[y]=n,t=y}return!s&&t&&(I=t),t||!s&&I},S=function(o,n){if(W(o))return o.clone();var e=typeof n=="object"?n:{};return e.date=o,e.args=arguments,new L(e)},p=ne;p.l=F,p.i=W,p.w=function(o,n){return S(o,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var L=function(){function o(e){this.$L=F(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[X]=!0}var n=o.prototype;return n.parse=function(e){this.$d=function(s){var t=s.date,l=s.utc;if(t===null)return new Date(NaN);if(p.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var u=t.match(K);if(u){var y=u[2]-1||0,j=(u[7]||"0").substring(0,3);return l?new Date(Date.UTC(u[1],y,u[3]||1,u[4]||0,u[5]||0,u[6]||0,j)):new Date(u[1],y,u[3]||1,u[4]||0,u[5]||0,u[6]||0,j)}}return new Date(t)}(e),this.init()},n.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},n.$utils=function(){return p},n.isValid=function(){return this.$d.toString()!==Q},n.isSame=function(e,s){var t=S(e);return this.startOf(s)<=t&&t<=this.endOf(s)},n.isAfter=function(e,s){return S(e)<this.startOf(s)},n.isBefore=function(e,s){return this.endOf(s)<S(e)},n.$g=function(e,s,t){return p.u(e)?this[s]:this.set(t,e)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(e,s){var t=this,l=!!p.u(s)||s,u=p.p(e),y=function(R,T){var A=p.w(t.$u?Date.UTC(t.$y,T,R):new Date(t.$y,T,R),t);return l?A:A.endOf($)},j=function(R,T){return p.w(t.toDate()[R].apply(t.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(T)),t)},M=this.$W,C=this.$M,N=this.$D,P="set"+(this.$u?"UTC":"");switch(u){case D:return l?y(1,0):y(31,11);case f:return l?y(1,C):y(0,C+1);case b:var H=this.$locale().weekStart||0,V=(M<H?M+7:M)-H;return y(l?N-V:N+(6-V),C);case $:case E:return j(P+"Hours",0);case g:return j(P+"Minutes",1);case h:return j(P+"Seconds",2);case v:return j(P+"Milliseconds",3);default:return this.clone()}},n.endOf=function(e){return this.startOf(e,!1)},n.$set=function(e,s){var t,l=p.p(e),u="set"+(this.$u?"UTC":""),y=(t={},t[$]=u+"Date",t[E]=u+"Date",t[f]=u+"Month",t[D]=u+"FullYear",t[g]=u+"Hours",t[h]=u+"Minutes",t[v]=u+"Seconds",t[w]=u+"Milliseconds",t)[l],j=l===$?this.$D+(s-this.$W):s;if(l===f||l===D){var M=this.clone().set(E,1);M.$d[y](j),M.init(),this.$d=M.set(E,Math.min(this.$D,M.daysInMonth())).$d}else y&&this.$d[y](j);return this.init(),this},n.set=function(e,s){return this.clone().$set(e,s)},n.get=function(e){return this[p.p(e)]()},n.add=function(e,s){var t,l=this;e=Number(e);var u=p.p(s),y=function(C){var N=S(l);return p.w(N.date(N.date()+Math.round(C*e)),l)};if(u===f)return this.set(f,this.$M+e);if(u===D)return this.set(D,this.$y+e);if(u===$)return y(1);if(u===b)return y(7);var j=(t={},t[h]=a,t[g]=m,t[v]=r,t)[u]||1,M=this.$d.getTime()+e*j;return p.w(M,this)},n.subtract=function(e,s){return this.add(-1*e,s)},n.format=function(e){var s=this,t=this.$locale();if(!this.isValid())return t.invalidDate||Q;var l=e||"YYYY-MM-DDTHH:mm:ssZ",u=p.z(this),y=this.$H,j=this.$m,M=this.$M,C=t.weekdays,N=t.months,P=t.meridiem,H=function(T,A,J,q){return T&&(T[A]||T(s,l))||J[A].slice(0,q)},V=function(T){return p.s(y%12||12,T,"0")},R=P||function(T,A,J){var q=T<12?"AM":"PM";return J?q.toLowerCase():q};return l.replace(ee,function(T,A){return A||function(J){switch(J){case"YY":return String(s.$y).slice(-2);case"YYYY":return p.s(s.$y,4,"0");case"M":return M+1;case"MM":return p.s(M+1,2,"0");case"MMM":return H(t.monthsShort,M,N,3);case"MMMM":return H(N,M);case"D":return s.$D;case"DD":return p.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return H(t.weekdaysMin,s.$W,C,2);case"ddd":return H(t.weekdaysShort,s.$W,C,3);case"dddd":return C[s.$W];case"H":return String(y);case"HH":return p.s(y,2,"0");case"h":return V(1);case"hh":return V(2);case"a":return R(y,j,!0);case"A":return R(y,j,!1);case"m":return String(j);case"mm":return p.s(j,2,"0");case"s":return String(s.$s);case"ss":return p.s(s.$s,2,"0");case"SSS":return p.s(s.$ms,3,"0");case"Z":return u}return null}(T)||u.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(e,s,t){var l,u=this,y=p.p(s),j=S(e),M=(j.utcOffset()-this.utcOffset())*a,C=this-j,N=function(){return p.m(u,j)};switch(y){case D:l=N()/12;break;case f:l=N();break;case x:l=N()/3;break;case b:l=(C-M)/6048e5;break;case $:l=(C-M)/864e5;break;case g:l=C/m;break;case h:l=C/a;break;case v:l=C/r;break;default:l=C}return t?l:p.a(l)},n.daysInMonth=function(){return this.endOf(f).$D},n.$locale=function(){return O[this.$L]},n.locale=function(e,s){if(!e)return this.$L;var t=this.clone(),l=F(e,s,!0);return l&&(t.$L=l),t},n.clone=function(){return p.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},o}(),se=L.prototype;return S.prototype=se,[["$ms",w],["$s",v],["$m",h],["$H",g],["$W",$],["$M",f],["$y",D],["$D",E]].forEach(function(o){se[o[1]]=function(n){return this.$g(n,o[0],o[1])}}),S.extend=function(o,n){return o.$i||(o(n,L,S),o.$i=!0),S},S.locale=F,S.isDayjs=W,S.unix=function(o){return S(1e3*o)},S.en=O[I],S.Ls=O,S.p={},S})})(ie);var we=ie.exports;const be=oe(we),De=c=>{const{value:d,formatter:r,precision:a,decimalSeparator:m,groupSeparator:w="",prefixCls:v}=c;let h;if(typeof r=="function")h=r(d);else{const g=String(d),$=g.match(/^(-?)(\d*)(\.(\d+))?$/);if(!$||g==="-")h=g;else{const b=$[1];let f=$[2]||"0",x=$[4]||"";f=f.replace(/\B(?=(\d{3})+(?!\d))/g,w),typeof a=="number"&&(x=x.padEnd(a,"0").slice(0,a>0?a:0)),x&&(x=`${m}${x}`),h=[k.createElement("span",{key:"int",className:`${v}-content-value-int`},b,f),x&&k.createElement("span",{key:"decimal",className:`${v}-content-value-decimal`},x)]}}return k.createElement("span",{className:`${v}-content-value`},h)},Oe=c=>{const{componentCls:d,marginXXS:r,padding:a,colorTextDescription:m,titleFontSize:w,colorTextHeading:v,contentFontSize:h,fontFamily:g}=c;return{[d]:Object.assign(Object.assign({},pe(c)),{[`${d}-title`]:{marginBottom:r,color:m,fontSize:w},[`${d}-skeleton`]:{paddingTop:a},[`${d}-content`]:{color:v,fontSize:h,fontFamily:g,[`${d}-content-value`]:{display:"inline-block",direction:"ltr"},[`${d}-content-prefix, ${d}-content-suffix`]:{display:"inline-block"},[`${d}-content-prefix`]:{marginInlineEnd:r},[`${d}-content-suffix`]:{marginInlineStart:r}}})}},Ce=c=>{const{fontSizeHeading3:d,fontSize:r}=c;return{titleFontSize:r,contentFontSize:d}},ke=me("Statistic",c=>{const d=he(c,{});return[Oe(d)]},Ce);var Te=function(c,d){var r={};for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&d.indexOf(a)<0&&(r[a]=c[a]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,a=Object.getOwnPropertySymbols(c);m<a.length;m++)d.indexOf(a[m])<0&&Object.prototype.propertyIsEnumerable.call(c,a[m])&&(r[a[m]]=c[a[m]]);return r};const B=c=>{const{prefixCls:d,className:r,rootClassName:a,style:m,valueStyle:w,value:v=0,title:h,valueRender:g,prefix:$,suffix:b,loading:f=!1,formatter:x,precision:D,decimalSeparator:E=".",groupSeparator:Q=",",onMouseEnter:K,onMouseLeave:ee}=c,te=Te(c,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:U,direction:ne,statistic:I}=k.useContext(ge),O=U("statistic",d),[X,W,F]=ke(O),S=k.createElement(De,{decimalSeparator:E,groupSeparator:Q,prefixCls:O,formatter:x,precision:D,value:v}),p=xe(O,{[`${O}-rtl`]:ne==="rtl"},I==null?void 0:I.className,r,a,W,F),L=$e(te,{aria:!0,data:!0});return X(k.createElement("div",Object.assign({},L,{className:p,style:Object.assign(Object.assign({},I==null?void 0:I.style),m),onMouseEnter:K,onMouseLeave:ee}),h&&k.createElement("div",{className:`${O}-title`},h),k.createElement(ve,{paragraph:!1,loading:f,className:`${O}-skeleton`},k.createElement("div",{style:w,className:`${O}-content`},$&&k.createElement("span",{className:`${O}-content-prefix`},$),g?g(S):S,b&&k.createElement("span",{className:`${O}-content-suffix`},b)))))},Ie=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Ne(c,d){let r=c;const a=/\[[^\]]*]/g,m=(d.match(a)||[]).map(g=>g.slice(1,-1)),w=d.replace(a,"[]"),v=Ie.reduce((g,$)=>{let[b,f]=$;if(g.includes(b)){const x=Math.floor(r/f);return r-=x*f,g.replace(new RegExp(`${b}+`,"g"),D=>{const E=D.length;return x.toString().padStart(E,"0")})}return g},w);let h=0;return v.replace(a,()=>{const g=m[h];return h+=1,g})}function _e(c,d){const{format:r=""}=d,a=new Date(c).getTime(),m=Date.now(),w=Math.max(a-m,0);return Ne(w,r)}var Ee=function(c,d){var r={};for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&d.indexOf(a)<0&&(r[a]=c[a]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,a=Object.getOwnPropertySymbols(c);m<a.length;m++)d.indexOf(a[m])<0&&Object.prototype.propertyIsEnumerable.call(c,a[m])&&(r[a[m]]=c[a[m]]);return r};const Ae=1e3/30;function ze(c){return new Date(c).getTime()}const He=c=>{const{value:d,format:r="HH:mm:ss",onChange:a,onFinish:m}=c,w=Ee(c,["value","format","onChange","onFinish"]),v=fe(),h=k.useRef(null),g=()=>{m==null||m(),h.current&&(clearInterval(h.current),h.current=null)},$=()=>{const x=ze(d);x>=Date.now()&&(h.current=setInterval(()=>{v(),a==null||a(x-Date.now()),x<Date.now()&&g()},Ae))};k.useEffect(()=>($(),()=>{h.current&&(clearInterval(h.current),h.current=null)}),[d]);const b=(x,D)=>_e(x,Object.assign(Object.assign({},D),{format:r})),f=x=>ye(x,{title:void 0});return k.createElement(B,Object.assign({},w,{value:d,valueRender:f,formatter:b}))},Re=k.memo(He);B.Countdown=Re;const{Title:G,Text:_}=ue;function ct(){var v,h,g,$,b;const{user:c}=ce(),d=de(),{data:r}=le.restaurant.findFirst.useQuery({where:{userId:c==null?void 0:c.id},include:{menuItems:{include:{customerInteractions:!0}}}}),a=((h=(v=r==null?void 0:r.menuItems)==null?void 0:v.filter(f=>f.arModelUrl))==null?void 0:h.length)||0,m=((g=r==null?void 0:r.menuItems)==null?void 0:g.reduce((f,x)=>{var D;return f+(((D=x.customerInteractions)==null?void 0:D.length)||0)},0))||0,w=[{title:"Item",key:"item",render:f=>i.jsxs(Z,{children:[i.jsx(je,{src:f.imageUrl}),i.jsx(_,{children:f.name})]})},{title:"Category",dataIndex:"category",key:"category"},{title:"Price",dataIndex:"price",key:"price"},{title:"Interactions",key:"interactions",render:f=>{var x;return((x=f.customerInteractions)==null?void 0:x.length.toString())||"0"}},{title:"Last Updated",key:"updated",render:f=>be(f.updatedAt).format("MMM D, YYYY")},{title:"Actions",key:"actions",render:f=>i.jsxs(Z,{children:[i.jsx("i",{className:"las la-eye",style:{cursor:"pointer",fontSize:"20px"},onClick:()=>d(`/menu/${f.id}/preview`)}),i.jsx("i",{className:"las la-edit",style:{cursor:"pointer",fontSize:"20px"},onClick:()=>d("/restaurant/menu-items")})]})}];return i.jsx(Me,{layout:"full-width",children:i.jsxs("div",{style:{maxWidth:1200,margin:"0 auto",padding:"24px"},children:[i.jsxs(re,{gutter:[24,24],align:"middle",justify:"space-between",children:[i.jsxs(Y,{children:[i.jsx(G,{level:2,children:"Restaurant Dashboard"}),i.jsx(_,{type:"secondary",children:"Manage your AR menu items and view customer interactions"})]}),i.jsx(Y,{children:i.jsxs(Z,{children:[i.jsx("i",{className:"las la-cog",style:{fontSize:"24px"}}),i.jsx(_,{children:r==null?void 0:r.name})]})})]}),i.jsxs(re,{gutter:[24,24],style:{marginTop:"24px"},children:[i.jsx(Y,{xs:24,sm:12,lg:8,children:i.jsx(z,{children:i.jsx(B,{title:"AR Menu Items",value:a,prefix:i.jsx("i",{className:"las la-cube"})})})}),i.jsx(Y,{xs:24,sm:12,lg:8,children:i.jsx(z,{children:i.jsx(B,{title:"Total Customer Interactions",value:m,prefix:i.jsx("i",{className:"las la-users"})})})}),i.jsx(Y,{xs:24,sm:12,lg:8,children:i.jsx(z,{children:i.jsx(B,{title:"Menu Categories",value:new Set(($=r==null?void 0:r.menuItems)==null?void 0:$.map(f=>f.category)).size,prefix:i.jsx("i",{className:"las la-tags"})})})})]}),i.jsxs(z,{style:{marginTop:"24px"},children:[i.jsx(G,{level:4,children:"AR Menu Items"}),i.jsx(Se,{columns:w,dataSource:((b=r==null?void 0:r.menuItems)==null?void 0:b.filter(f=>f.arModelUrl))||[],rowKey:"id",pagination:{pageSize:5}})]}),i.jsxs(re,{gutter:[24,24],style:{marginTop:"24px"},children:[i.jsx(Y,{xs:24,lg:12,children:i.jsxs(z,{children:[i.jsx(G,{level:4,children:"Restaurant Profile"}),i.jsxs(Z,{direction:"vertical",children:[i.jsx(_,{strong:!0,children:"Name: "}),i.jsx(_,{children:r==null?void 0:r.name}),i.jsx(_,{strong:!0,children:"Description: "}),i.jsx(_,{children:r==null?void 0:r.description}),i.jsx(_,{strong:!0,children:"Address: "}),i.jsx(_,{children:r==null?void 0:r.address})]})]})}),i.jsx(Y,{xs:24,lg:12,children:i.jsxs(z,{children:[i.jsx(G,{level:4,children:"Quick Actions"}),i.jsxs(Z,{size:"large",children:[i.jsxs(z,{hoverable:!0,style:{width:120,textAlign:"center"},onClick:()=>d("/restaurant/menu-items"),children:[i.jsx("i",{className:"las la-plus",style:{fontSize:"24px"}}),i.jsx(_,{children:"Add Menu Item"})]}),i.jsxs(z,{hoverable:!0,style:{width:120,textAlign:"center"},onClick:()=>d(`/restaurant/${r==null?void 0:r.id}/menu`),children:[i.jsx("i",{className:"las la-eye",style:{fontSize:"24px"}}),i.jsx(_,{children:"View Menu"})]})]})]})})]})]})})}export{ct as default};
