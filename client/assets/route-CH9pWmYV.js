import{r as m,j as e}from"./index-DF-VfARk.js";import{U as j}from"./index-BzoxnAcz.js";import{A as c,T as u}from"./index-Pi5MhuwB.js";import{A as y}from"./index-CAyEHKTB.js";import{a as w}from"./index-DkUROBfk.js";import{u as v}from"./index-BIeDE5Ob.js";import{F as s}from"./index-e6vNLNv5.js";import{F as o,B as d}from"./index-CZ386Uyv.js";import{I as a}from"./index-C3dcIk9B.js";import"./index-DkfDQLHp.js";import"./collapse-BbEVqHco.js";import"./row-CN7xCyZB.js";import"./responsiveObserver-BnMIucoH.js";import"./ExclamationCircleFilled-DrSG7Lz4.js";import"./pickAttrs-BTWl6K21.js";function Y(){const p=w(),[i]=v(),[n]=s.useForm(),[g,l]=m.useState(!1),{mutateAsync:h}=c.authentication.register.useMutation(),{mutateAsync:x}=c.authentication.login.useMutation({onSuccess:r=>{r.redirect&&(window.location.href=r.redirect)}});m.useEffect(()=>{var t;const r=(t=i.get("email"))==null?void 0:t.trim();j.isDefined(r)&&n.setFieldsValue({email:r})},[i]);const f=async r=>{l(!0);try{const t=i.get("tokenInvitation")??void 0;await h({...r,tokenInvitation:t}),x(r)}catch(t){console.error(`Could not signup: ${t.message}`,{variant:"error"}),l(!1)}};return e.jsx(o,{align:"center",justify:"center",vertical:!0,flex:1,children:e.jsxs(o,{vertical:!0,style:{width:"340px",paddingBottom:"50px",paddingTop:"50px"},gap:"middle",children:[e.jsx(y,{description:"Welcome!"}),e.jsxs(s,{form:n,onFinish:f,layout:"vertical",autoComplete:"off",requiredMark:!1,children:[e.jsx(s.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Email is required"}],children:e.jsx(a,{type:"email",placeholder:"Your email",autoComplete:"email"})}),e.jsx(s.Item,{name:"name",rules:[{required:!0,message:"Name is required"}],label:"Name",children:e.jsx(a,{placeholder:"Your name"})}),e.jsx(s.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Password is required"}],children:e.jsx(a.Password,{type:"password",placeholder:"Your password",autoComplete:"current-password"})}),e.jsx(s.Item,{children:e.jsx(d,{type:"primary",htmlType:"submit",loading:g,block:!0,children:"Register"})})]}),e.jsx(d,{ghost:!0,style:{border:"none"},onClick:()=>p("/login"),children:e.jsxs(o,{gap:"small",justify:"center",children:[e.jsx(u.Text,{type:"secondary",children:"Have an account?"})," ",e.jsx(u.Text,{children:"Sign in"})]})})]})})}export{Y as default};
